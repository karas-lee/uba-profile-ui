<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBA 프로파일 시스템 상태</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(51, 65, 85, 0.3);
        }

        .header-title h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .header-title p {
            color: #94a3b8;
            font-size: 1.1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #5856eb, #7c3aed);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: rgba(51, 65, 85, 0.7);
            color: #e2e8f0;
            border: 1px solid rgba(51, 65, 85, 0.5);
        }

        .btn-secondary:hover {
            background: rgba(51, 65, 85, 0.9);
            transform: translateY(-2px);
        }

        .status-section {
            margin-bottom: 2rem;
        }

        .status-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 1rem;
        }

        .status-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .status-card {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 0.75rem;
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(51, 65, 85, 0.3);
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .status-card-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .status-card-value {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: #f1f5f9;
        }

        .status-card-label {
            font-size: 0.9rem;
            color: #94a3b8;
        }

        /* 네비게이션 탭 스타일 */
        .nav-tabs {
            display: flex;
            border-bottom: 1px solid rgba(51, 65, 85, 0.5);
            margin-bottom: 2rem;
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            border-bottom: 2px solid transparent;
            color: #94a3b8;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-tab:hover {
            color: #e2e8f0;
        }

        .nav-tab.active {
            color: #6366f1;
            border-bottom-color: #6366f1;
        }

        /* 그라데이션 스타일의 모니터링 바 */
        .monitoring-section {
            margin-bottom: 2.5rem;
        }

        .resource-bar-container {
            margin-bottom: 1.5rem;
        }

        .resource-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .resource-name {
            color: #e2e8f0;
            font-weight: 600;
        }

        .resource-value {
            color: #94a3b8;
        }

        .resource-bar {
            height: 12px;
            width: 100%;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 6px;
            overflow: hidden;
        }

        .resource-bar-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease-in-out;
        }

        .cpu-bar {
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
        }

        .memory-bar {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .disk-bar {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .network-bar {
            background: linear-gradient(90deg, #3b82f6, #2563eb);
        }

        /* 테이블 스타일 */
        .resource-table-container {
            margin-top: 2rem;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .resource-table {
            width: 100%;
            border-collapse: collapse;
        }

        .resource-table th,
        .resource-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(51, 65, 85, 0.3);
        }

        .resource-table th {
            background: rgba(30, 41, 59, 0.7);
            color: #94a3b8;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .resource-table tbody tr {
            transition: all 0.3s ease;
        }

        .resource-table tbody tr:hover {
            background: rgba(30, 41, 59, 0.5);
        }

        .resource-table tbody tr:last-child td {
            border-bottom: none;
        }

        .profile-name {
            color: #e2e8f0;
            font-weight: 600;
        }

        .utilization-cell {
            display: flex;
            align-items: center;
        }

        .utilization-bar {
            width: 100px;
            height: 8px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 4px;
            margin-right: 0.75rem;
            overflow: hidden;
        }

        .utilization-fill {
            height: 100%;
            border-radius: 4px;
            background: #6366f1;
        }

        .utilization-text {
            font-size: 0.9rem;
            color: #94a3b8;
        }

        @media (max-width: 768px) {
            .status-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .resource-table th,
            .resource-table td {
                padding: 0.75rem 0.5rem;
                font-size: 0.85rem;
            }
            
            .utilization-bar {
                width: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <div class="header-title">
                <h1>시스템 상태 모니터링</h1>
                <p>UBA 프로파일의 시스템 리소스 사용량과 상태를 확인합니다</p>
            </div>
            <a href="index.html" class="btn btn-secondary">
                대시보드로 돌아가기
            </a>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab" onclick="location.href='uba_integrated_management.html'">통합 실행 관리</div>
            <div class="nav-tab" onclick="location.href='uba_integrated_execution.html'">통합 실행 이력</div>
            <div class="nav-tab active">시스템 상태</div>
        </div>

        <!-- 시스템 상태 요약 섹션 -->
        <div class="status-section">
            <h2 class="status-title">시스템 상태 요약</h2>
            <div class="status-cards">
                <div class="status-card">
                    <div class="status-card-icon">💻</div>
                    <div class="status-card-value">35%</div>
                    <div class="status-card-label">CPU 사용률</div>
                </div>
                <div class="status-card">
                    <div class="status-card-icon">🧠</div>
                    <div class="status-card-value">60%</div>
                    <div class="status-card-label">메모리 사용률</div>
                </div>
                <div class="status-card">
                    <div class="status-card-icon">💽</div>
                    <div class="status-card-value">45%</div>
                    <div class="status-card-label">디스크 사용률</div>
                </div>
                <div class="status-card">
                    <div class="status-card-icon">🔔</div>
                    <div class="status-card-value">2</div>
                    <div class="status-card-label">활성 알림</div>
                </div>
                <div class="status-card">
                    <div class="status-card-icon">⚙️</div>
                    <div class="status-card-value">5</div>
                    <div class="status-card-label">활성 프로세스</div>
                </div>
            </div>
        </div>

        <!-- 리소스 모니터링 섹션 -->
        <div class="monitoring-section">
            <h2 class="status-title">리소스 모니터링</h2>

            <!-- CPU 사용량 -->
            <div class="resource-bar-container">
                <div class="resource-bar-label">
                    <span class="resource-name">CPU 사용량</span>
                    <span class="resource-value">35%</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-bar-fill cpu-bar" style="width: 35%;"></div>
                </div>
            </div>

            <!-- 메모리 사용량 -->
            <div class="resource-bar-container">
                <div class="resource-bar-label">
                    <span class="resource-name">메모리 사용량</span>
                    <span class="resource-value">60%</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-bar-fill memory-bar" style="width: 60%;"></div>
                </div>
            </div>

            <!-- 디스크 I/O -->
            <div class="resource-bar-container">
                <div class="resource-bar-label">
                    <span class="resource-name">디스크 I/O</span>
                    <span class="resource-value">45%</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-bar-fill disk-bar" style="width: 45%;"></div>
                </div>
            </div>

            <!-- 네트워크 처리량 -->
            <div class="resource-bar-container">
                <div class="resource-bar-label">
                    <span class="resource-name">네트워크 처리량</span>
                    <span class="resource-value">28%</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-bar-fill network-bar" style="width: 28%;"></div>
                </div>
            </div>
        </div>

        <!-- 프로파일별 리소스 사용량 -->
        <div class="status-section">
            <h2 class="status-title">프로파일별 리소스 사용량</h2>
            <div class="resource-table-container">
                <table class="resource-table">
                    <thead>
                        <tr>
                            <th>프로파일</th>
                            <th>CPU</th>
                            <th>메모리</th>
                            <th>디스크 I/O</th>
                            <th>처리량</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="profile-name">사용자 활동 모니터링</td>
                            <td>
                                <div class="utilization-cell">
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 25%;"></div>
                                    </div>
                                    <span class="utilization-text">25%</span>
                                </div>
                            </td>
                            <td>500MB</td>
                            <td>15MB/s</td>
                            <td>1.2K/s</td>
                        </tr>
                        <tr>
                            <td class="profile-name">네트워크 트래픽 분석</td>
                            <td>
                                <div class="utilization-cell">
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 10%;"></div>
                                    </div>
                                    <span class="utilization-text">10%</span>
                                </div>
                            </td>
                            <td>200MB</td>
                            <td>5MB/s</td>
                            <td>0.5K/s</td>
                        </tr>
                        <tr>
                            <td class="profile-name">데이터베이스 활동 모니터링</td>
                            <td>
                                <div class="utilization-cell">
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 18%;"></div>
                                    </div>
                                    <span class="utilization-text">18%</span>
                                </div>
                            </td>
                            <td>350MB</td>
                            <td>8MB/s</td>
                            <td>0.7K/s</td>
                        </tr>
                        <tr>
                            <td class="profile-name">권한 변경 모니터링</td>
                            <td>
                                <div class="utilization-cell">
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 8%;"></div>
                                    </div>
                                    <span class="utilization-text">8%</span>
                                </div>
                            </td>
                            <td>120MB</td>
                            <td>3MB/s</td>
                            <td>0.3K/s</td>
                        </tr>
                        <tr>
                            <td class="profile-name">파일 접근 모니터링</td>
                            <td>
                                <div class="utilization-cell">
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 15%;"></div>
                                    </div>
                                    <span class="utilization-text">15%</span>
                                </div>
                            </td>
                            <td>280MB</td>
                            <td>12MB/s</td>
                            <td>0.9K/s</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

<script>
    // 초기 로드 시 실행
    document.addEventListener('DOMContentLoaded', function() {
        // 모의 데이터로 초기 로드
        loadSystemStatus();
        
        // 10초마다 데이터 갱신
        setInterval(loadSystemStatus, 10000);
    });
    
    // 로컬 스토리지에서 프로파일 목록 가져오기
    function getProfiles() {
        const storedProfiles = localStorage.getItem('ubaProfiles');
        return storedProfiles ? JSON.parse(storedProfiles) : [];
    }
    
    // 시스템 상태 데이터 로드 (모의 데이터)
    function loadSystemStatus() {
        // 실제 구현에서는 API를 호출하여 데이터를 가져오지만
        // 이 예제에서는 모의 데이터를 생성하여 사용합니다
        updateStatusSummary();
        updateResourceMonitoring();
        updateResourceTable();
    }
    
    // 상태 요약 업데이트
    function updateStatusSummary() {
        const profiles = getProfiles();
        const profileCount = profiles.length;
        
        // 활성 프로세스 - 프로파일 수에 기반하여 계산
        const processCount = Math.min(profileCount, 3) + Math.floor(Math.random() * 3);
        document.querySelector('.status-card:nth-child(5) .status-card-value').textContent = processCount;
        
        // CPU 사용률 (프로파일당 5-10% 추가, 최소 15%)
        const cpuUsage = Math.min(Math.max(15, profileCount * (5 + Math.floor(Math.random() * 5))), 90);
        document.querySelector('.status-card:nth-child(1) .status-card-value').textContent = cpuUsage + '%';
        
        // 메모리 사용률 (프로파일당 8-12% 추가, 최소 30%)
        const memoryUsage = Math.min(Math.max(30, profileCount * (8 + Math.floor(Math.random() * 4))), 95);
        document.querySelector('.status-card:nth-child(2) .status-card-value').textContent = memoryUsage + '%';
        
        // 디스크 사용률 (프로파일당 6-9% 추가, 최소 25%)
        const diskUsage = Math.min(Math.max(25, profileCount * (6 + Math.floor(Math.random() * 3))), 85);
        document.querySelector('.status-card:nth-child(3) .status-card-value').textContent = diskUsage + '%';
        
        // 활성 알림 (0~프로파일 수/2 사이 랜덤값)
        const alertCount = Math.floor(Math.random() * (Math.floor(profileCount/2) + 1));
        document.querySelector('.status-card:nth-child(4) .status-card-value').textContent = alertCount;
    }
    
    // 리소스 모니터링 바 업데이트
    function updateResourceMonitoring() {
        const profiles = getProfiles();
        const profileCount = profiles.length;
        
        // CPU 사용량 업데이트 (프로파일당 5-10% 추가, 최소 15%)
        const cpuUsage = Math.min(Math.max(15, profileCount * (5 + Math.floor(Math.random() * 5))), 90);
        updateResourceBar('CPU 사용량', cpuUsage, 'cpu-bar');
        
        // 메모리 사용량 업데이트 (프로파일당 8-12% 추가, 최소 30%)
        const memUsage = Math.min(Math.max(30, profileCount * (8 + Math.floor(Math.random() * 4))), 95);
        updateResourceBar('메모리 사용량', memUsage, 'memory-bar');
        
        // 디스크 I/O 업데이트 (프로파일당 6-9% 추가, 최소 25%)
        const diskIOUsage = Math.min(Math.max(25, profileCount * (6 + Math.floor(Math.random() * 3))), 85);
        updateResourceBar('디스크 I/O', diskIOUsage, 'disk-bar');
        
        // 네트워크 처리량 업데이트 (프로파일당 4-8% 추가, 최소 10%)
        const networkUsage = Math.min(Math.max(10, profileCount * (4 + Math.floor(Math.random() * 4))), 80);
        updateResourceBar('네트워크 처리량', networkUsage, 'network-bar');
    }
    
    // 리소스 모니터링 바 개별 업데이트 함수
    function updateResourceBar(resourceName, value, barClass) {
        // 리소스 이름으로 해당 컨테이너 찾기
        const containers = document.querySelectorAll('.resource-bar-container');
        
        for (const container of containers) {
            const nameElement = container.querySelector('.resource-name');
            
            if (nameElement && nameElement.textContent === resourceName) {
                // 값 업데이트
                container.querySelector('.resource-value').textContent = value + '%';
                
                // 바 너비 업데이트
                const barFill = container.querySelector(`.resource-bar-fill.${barClass}`);
                if (barFill) {
                    barFill.style.width = value + '%';
                }
                
                break;
            }
        }
    }
    
    // 프로파일별 리소스 테이블 업데이트
    function updateResourceTable() {
        // 실제 프로파일 목록 가져오기
        const profiles = getProfiles();
        
        // 테이블 본문 요소 가져오기
        const tableBody = document.querySelector('.resource-table tbody');
        
        // 테이블 내용 초기화
        tableBody.innerHTML = '';
        
        // 프로파일이 있는 경우 각 프로파일에 대한 행 생성
        if (profiles.length > 0) {
            profiles.forEach(profile => {
                // CPU 사용량 랜덤 계산 (5-30% 사이)
                const cpuUtilization = getRandomValue(5, 30);
                
                // 메모리 사용량 랜덤 계산 (100-600MB 사이)
                const memoryValue = (Math.random() * 500 + 100).toFixed(0);
                
                // 디스크 I/O 랜덤 계산 (1-16MB/s 사이)
                const diskIOValue = (Math.random() * 15 + 1).toFixed(1);
                
                // 처리량 랜덤 계산 (0.1-1.6K/s 사이)
                const throughputValue = (Math.random() * 1.5 + 0.1).toFixed(1);
                
                // 새 행 생성
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="profile-name">${profile.profileName || '이름 없는 프로파일'}</td>
                    <td>
                        <div class="utilization-cell">
                            <div class="utilization-bar">
                                <div class="utilization-fill" style="width: ${cpuUtilization}%;"></div>
                            </div>
                            <span class="utilization-text">${cpuUtilization}%</span>
                        </div>
                    </td>
                    <td>${memoryValue}MB</td>
                    <td>${diskIOValue}MB/s</td>
                    <td>${throughputValue}K/s</td>
                `;
                
                // 테이블에 행 추가
                tableBody.appendChild(row);
            });
        } else {
            // 프로파일이 없는 경우 안내 메시지 표시
            const row = document.createElement('tr');
            row.innerHTML = `
                <td colspan="5" style="text-align: center; padding: 2rem;">
                    등록된 프로파일이 없습니다. 대시보드에서 프로파일을 생성해 주세요.
                </td>
            `;
            tableBody.appendChild(row);
        }
    }
    
    // min과 max 사이의 랜덤 정수 생성
    function getRandomValue(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
</script>
</body>
</html> 